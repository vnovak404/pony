# Pony Parade

Pony Parade is a playful webpage and mini-sim where you create ponies, generate
their portraits and sprites, and watch them wander around a Ponyville map. The
site blends a kid-friendly builder UI with a live canvas scene where ponies
walk, rest, and visit spots around town. 

<img width="1180" height="671" alt="image" src="https://github.com/user-attachments/assets/76ae75f8-a7c0-488c-8fe3-b6b1200b60dd" />


Pony parade was build by a 7 year old girl through conversations with Codex 5.2 High.
This description as well as everything else here was generated by Codex.

<picture>
  <source srcset="assets/author/author.webp" type="image/webp" />
  <img src="assets/author/author.jpeg" alt="Pony Parade creator portrait" />
</picture>

## Docs
- JavaScript modules: `docs/js-modules.md`
- Python scripts: `docs/python-scripts.md`

## What the page includes
- Pony creator form with color, talent, and vibe inputs.
- Hero portraits for each pony (stored under `assets/ponies/*.webp`).
- Sprite generation + spritesheet packing for map animation.
- Ponyville map with roads, structures, decor, and moving ponies.
- Simple drives (hunger, thirst, tiredness, boredom, health) with label stats.
- Special VFX overlays for specific ponies and locations.

## Talk to the ponies (local helper)
This is the voice chat flow for asking the ponies questions.

- Run the local BYOK helper: `.venv/bin/python scripts/speech_helper.py`
- Pick a pony in the dropdown and press Start Listening (spacebar also works).
- The helper does STT -> LLM -> TTS and streams a pony reply back.
- Pronunciation helper lets you teach special names (Twylite -> Twy-light).
- Conversation logs land in `logs/conversations/<pony-slug>-timestamp.txt`.

If you're on `https://myponyparade.com`, your browser will block `http://localhost`.
Run the TLS setup once, trust the local cert, then start the helper in HTTPS mode:

```bash
.venv/bin/python scripts/setup_local_tls.py
.venv/bin/python scripts/speech_helper.py --allowed-origin https://myponyparade.com
```

Trust steps (one-time, pick your OS):
- macOS: `sudo security add-trusted-cert -d -r trustRoot -k /Library/Keychains/System.keychain certs/ponyparade-ca-cert.pem`
- Windows (Admin): `certutil -addstore -f Root certs/ponyparade-ca-cert.pem`
- Linux: `sudo cp certs/ponyparade-ca-cert.pem /usr/local/share/ca-certificates/ponyparade-local-ca.crt && sudo update-ca-certificates`

## Backstory + lore
- Long-form backstories live in `data/pony_backstories.json` (800-1000ish words each).
- 100-word summaries live in `data/pony_lore.json` and are what the speech helper uses.
- Regenerate lore with `scripts/generate_pony_lore.py` when you add new ponies.

## Map interaction modes
- Hover the map to see tooltips, and toggle pony labels with the checkbox.
- Click a pony to open the command menu (needs stats + quick actions).
- Quick actions include eat/drink/fun/rest/vet/repair/market and a clear/close.
- Drag structures to move them when the local server is running (positions persist).
- The quickbar includes a magic wand to reset pony stats + supplies.

## Run locally
Use the local server to load the site and generate assets:

```bash
python3 scripts/pony_server.py
```

If you want to generate new assets, create a `.env` with `OPENAI_API_KEY` and use
the scripts in `scripts/` (portraits, sprites, structures, UI icons).

## Deploy (static)
To build a minimal deployable folder:

```bash
python3 scripts/build_public.py --clean
```

Deploy the `public/` folder to Cloudflare Pages (or any static host).

We are keeping track of the work on the Pony Parade community on X:
https://x.com/i/communities/2008961438069456942
